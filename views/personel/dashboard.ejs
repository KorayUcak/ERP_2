<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personel Paneli - Simya ERP</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/enterprise-style.css">
  <style>
    .welcome-card { background: var(--bg-surface); padding: 48px; border-radius: 12px; border: 1px solid var(--neutral-200); text-align: center; transition: all 200ms ease; box-shadow: var(--shadow-sm); }
    .welcome-card:hover { border-color: var(--primary-500); box-shadow: var(--shadow-md); transform: translateY(-2px); }
    .welcome-card h2 { color: var(--neutral-800); font-size: 28px; font-weight: 700; margin-bottom: 16px; }
    .welcome-card p { color: var(--neutral-500); font-size: 15px; line-height: 1.6; }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-header">
      <h1>Simya ERP - Personel Paneli</h1>
      <div class="navbar-right">
        <span class="user-info">HoÅŸ geldiniz, <%= username %></span>
        <a href="/logout" class="logout-btn">Ã‡Ä±kÄ±ÅŸ Yap</a>
      </div>
    </div>
    <div class="navbar-menu">
      <a href="/personel" class="active">Ana Sayfa</a>
      <a href="/personel/siparis-olustur">SipariÅŸ OluÅŸturma</a>
      <a href="/personel/mal-kabul">Mal Kabul</a>
      <a href="/personel/giris-kalite">GiriÅŸ Kalite</a>
      <a href="/personel/uretim-planlama">Ãœretim Planlama</a>
      <a href="/personel/operator">OperatÃ¶r</a>
      <a href="/personel/cikis-kalite">Ã‡Ä±kÄ±ÅŸ Kalite</a>
      <a href="/personel/iade-yonetimi">Ä°ade YÃ¶netimi</a>
      <a href="/personel/kimyasal-tuketim">Kimyasal TÃ¼ketim</a>
    </div>
  </nav>
  
  <div class="container">
    <% if (bildirimler && bildirimler.length > 0) { %>
      <div class="content-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; margin-bottom: 24px;">
        <h2 style="color: white; border-bottom: 2px solid rgba(255,255,255,0.3); padding-bottom: 12px; margin-bottom: 20px;">ðŸ“¢ YÃ¶netici Bildirimleri</h2>
        <% bildirimler.forEach(bildirim => { %>
          <div style="background: rgba(255,255,255,0.95); padding: 16px 20px; border-radius: 10px; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <div style="color: #2d3748; font-size: 15px; font-weight: 500; margin-bottom: 6px;"><%= bildirim.Mesaj %></div>
            <div style="color: #718096; font-size: 13px;">
              <%= new Date(bildirim.OlusturmaTarihi).toLocaleString('tr-TR', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
              }) %>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
    
    <% if (aktifSiparisler && aktifSiparisler.length > 0) { %>
      <div class="content-card" style="margin-bottom: 24px;">
        <h2>ðŸ“¦ Aktif SipariÅŸler ve DurumlarÄ±</h2>
        <table>
          <thead>
            <tr>
              <th>SipariÅŸ Kodu</th>
              <th>MÃ¼ÅŸteri</th>
              <th>ParÃ§a AdÄ±</th>
              <th>Termin Tarihi</th>
              <th>Mevcut Durum</th>
            </tr>
          </thead>
          <tbody>
            <% aktifSiparisler.forEach(siparis => { %>
              <tr>
                <td style="font-weight: 600; color: var(--primary-600);"><%= siparis.SiparisKodu %></td>
                <td><%= siparis.MusteriAdi %></td>
                <td><%= siparis.ParcaAdi %></td>
                <td>
                  <% if (siparis.TerminTarihi) { %>
                    <%= new Date(siparis.TerminTarihi).toLocaleDateString('tr-TR') %>
                  <% } else { %>
                    -
                  <% } %>
                </td>
                <td>
                  <% 
                    let badgeClass = 'badge-info';
                    let icon = 'â³';
                    if (siparis.Durum === 'TamamlandÄ±') {
                      badgeClass = 'badge-success';
                      icon = 'âœ…';
                    } else if (siparis.Durum === 'Ã‡Ä±kÄ±ÅŸ Kalite Bekliyor') {
                      badgeClass = 'badge-warning';
                      icon = 'ðŸ”';
                    } else if (siparis.Durum === 'OperatÃ¶r Ä°ÅŸlemde') {
                      badgeClass = 'badge-info';
                      icon = 'âš™ï¸';
                    } else if (siparis.Durum === 'GiriÅŸ Kalite Bekliyor') {
                      badgeClass = 'badge-warning';
                      icon = 'ðŸ“‹';
                    } else if (siparis.Durum === 'Mal Kabul Bekliyor') {
                      badgeClass = 'badge-danger';
                      icon = 'ðŸ“¥';
                    }
                  %>
                  <span class="badge <%= badgeClass %>"><%= icon %> <%= siparis.Durum %></span>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    <% } %>
    
    <div class="welcome-card">
      <h2>Personel Paneline HoÅŸ Geldiniz</h2>
      <p>LÃ¼tfen yukarÄ±daki menÃ¼den iÅŸlem yapmak istediÄŸiniz modÃ¼lÃ¼ seÃ§iniz.</p>
    </div>
  </div>

  <!-- BaÅŸarÄ± MesajÄ± Modal -->
  <div id="successModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 9999; justify-content: center; align-items: center;">
    <div style="background: white; padding: 40px 60px; border-radius: 16px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.2); animation: fadeIn 0.3s ease;">
      <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; margin: 0 auto 20px; display: flex; justify-content: center; align-items: center;">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <h3 style="color: #059669; font-size: 24px; margin-bottom: 10px; font-weight: 700;">Ä°ÅŸlem BaÅŸarÄ±lÄ±!</h3>
      <p style="color: #718096; font-size: 16px;">Ana Sayfa'ya yÃ¶nlendiriliyorsunuz...</p>
    </div>
  </div>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === '1') {
      const modal = document.getElementById('successModal');
      modal.style.display = 'flex';
      
      setTimeout(() => {
        modal.style.display = 'none';
        window.history.replaceState(null, null, window.location.pathname);
      }, 2000);
    }
  </script>
</body>
</html>
